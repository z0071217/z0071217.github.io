<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>å†™æ–°æ—¥è®°</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<script src="https://cdn.tailwindcss.com"></script>
<style>body{background:#111;color:#eee;font-family:monospace}</style>
</head>
<body class="p-4">
<h1 class="text-2xl mb-4">å†™ æ–° æ—¥ è®°</h1>
<form id="form" class="space-y-4 max-w-xl">
  <input id="date" type="datetime-local" class="bg-gray-800 px-3 py-1 rounded w-full" required>
  <select id="who" class="bg-gray-800 px-3 py-1 rounded w-full">
    <option>å°çŒ« ğŸ±</option><option>å°ç‹— ğŸ¶</option><option>å°ç†Š ğŸ»</option>
  </select>
  <textarea id="text" rows="4" placeholder="å†…å®¹ï¼ˆæ”¯æŒ Markdown åæœŸä¼šæ¸²æŸ“ï¼‰" class="bg-gray-800 px-3 py-1 rounded w-full" required></textarea>
  <input id="img" type="url" placeholder="å›¾ç‰‡ URLï¼ˆå¯é€‰ï¼‰" class="bg-gray-800 px-3 py-1 rounded w-full">
  <button type="submit" class="bg-cyan-600 px-4 py-2 rounded">å‘å°„ âœ¨</button>
</form>
<a href="index.html" class="inline-block mt-6 text-cyan-400">â† è¿”å›é¦–é¡µ</a>

<script>
// æŠŠæ—¥è®°å­˜åˆ°æµè§ˆå™¨æœ¬åœ°
function load(){ return JSON.parse(localStorage.getItem('diary')||'[]'); }
function save(arr){ localStorage.setItem('diary',JSON.stringify(arr)); }

document.getElementById('form').addEventListener('submit',e=>{
  e.preventDefault();
  const entry = {
    date: document.getElementById('date').value,
    who: document.getElementById('who').value,
    text: document.getElementById('text').value,
    img: document.getElementById('img').value
  };
  const arr = load(); arr.push(entry); save(arr);
  alert('å·²ä¿å­˜åˆ°æœ¬åœ°ï¼');
  location.href = 'index.html';   // å†™å®Œåå›é¦–é¡µ
});

// é»˜è®¤å¡«æ­¤åˆ»
document.getElementById('date').value = new Date().toISOString().slice(0,16);
</script>
</body>
</html>

